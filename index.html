<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>BiasLens Enterprise - Neural Media Analysis Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        :root {
            /* Premium Color System */
            --bg-void: #000000;
            --bg-deep: #020208;
            --bg-primary: #0a0a12;
            --bg-secondary: #0f0f1a;
            --bg-tertiary: #141420;
            --bg-elevated: #1a1a2e;
            --bg-surface: #1e1e3a;
            --bg-overlay: #242442;
            --bg-glass: rgba(20, 20, 32, 0.85);
            --bg-glass-heavy: rgba(30, 30, 58, 0.95);
            
            /* Neural Color Palette */
            --neural-primary: #6366f1;
            --neural-secondary: #8b5cf6;
            --neural-tertiary: #ec4899;
            --neural-accent: #06b6d4;
            --neural-success: #10b981;
            --neural-warning: #f59e0b;
            --neural-danger: #ef4444;
            
            /* Precision Text Colors */
            --text-primary: #f8fafc;
            --text-secondary: #e2e8f0;
            --text-tertiary: #cbd5e1;
            --text-quaternary: #94a3b8;
            --text-muted: #64748b;
            --text-subtle: #475569;
            --text-ghost: #334155;
            
            /* Bias Spectrum Colors */
            --bias-left-primary: #2563eb;
            --bias-left-secondary: #3b82f6;
            --bias-neutral-primary: #6b7280;
            --bias-neutral-secondary: #9ca3af;
            --bias-right-primary: #dc2626;
            --bias-right-secondary: #ef4444;
            
            /* Precision Borders */
            --border-primary: #1e293b;
            --border-secondary: #334155;
            --border-tertiary: #475569;
            --border-accent: #64748b;
            --border-neural: rgba(99, 102, 241, 0.3);
            
            /* Gradient Systems */
            --gradient-neural: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #06b6d4 75%, #10b981 100%);
            --gradient-neural-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%);
            --gradient-bias-spectrum: linear-gradient(90deg, 
                #2563eb 0%, #3b82f6 15%, #4f46e5 25%, 
                #6366f1 35%, #6b7280 45%, #6b7280 55%, 
                #ef4444 65%, #dc2626 75%, #b91c1c 85%, #991b1b 100%);
            --gradient-surface: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(236, 72, 153, 0.02) 100%);
            --gradient-glow: radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.2) 0%, transparent 70%);
            
            /* Shadow Systems */
            --shadow-neural: 0 25px 50px -12px rgba(99, 102, 241, 0.25);
            --shadow-elevation-1: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-elevation-2: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --shadow-elevation-3: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
            --shadow-elevation-4: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            --shadow-glow-soft: 0 0 50px rgba(99, 102, 241, 0.15);
            --shadow-glow-intense: 0 0 100px rgba(99, 102, 241, 0.3);
            
            /* Blur Effects */
            --blur-glass: blur(24px);
            --blur-heavy: blur(40px);
            --blur-subtle: blur(8px);
            
            /* Transition Systems */
            --transition-micro: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-elegant: 500ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-bounce: 600ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --transition-physics: 800ms cubic-bezier(0.175, 0.885, 0.32, 1.275);
            
            /* Spacing System */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;
            --space-4xl: 96px;
            
            /* Border Radius System */
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --radius-2xl: 32px;
            --radius-full: 9999px;
        }

        /* Global Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::before,
        *::after {
            box-sizing: border-box;
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-text-size-adjust: 100%;
            -moz-text-size-adjust: 100%;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 50% 0%, rgba(236, 72, 153, 0.05) 0%, transparent 30%),
                radial-gradient(circle at 0% 50%, rgba(6, 182, 212, 0.03) 0%, transparent 30%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-feature-settings: 'cv01', 'cv02', 'cv03', 'cv04', 'kern';
            overflow-x: hidden;
        }

        /* Neural Particle System */
        .neural-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--neural-primary);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* Main Container */
        .app-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: var(--space-3xl) var(--space-xl);
            min-height: 100vh;
            position: relative;
            z-index: 2;
        }

        /* Enterprise Header */
        .enterprise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4xl);
            padding: var(--space-lg) 0;
        }

        .enterprise-logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo-mark {
            width: 48px;
            height: 48px;
            background: var(--gradient-neural);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 800;
            color: white;
            box-shadow: var(--shadow-neural);
            position: relative;
            overflow: hidden;
        }

        .logo-mark::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(30deg); }
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 24px;
            font-weight: 800;
            background: var(--gradient-neural);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .logo-subtitle {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-quaternary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 2px;
        }

        .status-indicators {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 12px;
            font-weight: 500;
            color: var(--text-quaternary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--neural-success);
            box-shadow: 0 0 10px var(--neural-success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 10px var(--neural-success); }
            50% { opacity: 0.5; box-shadow: 0 0 20px var(--neural-success); }
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            margin-bottom: var(--space-4xl);
            position: relative;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            background: var(--bg-glass);
            backdrop-filter: var(--blur-glass);
            border: 1px solid var(--border-neural);
            border-radius: var(--radius-full);
            padding: var(--space-sm) var(--space-lg);
            margin-bottom: var(--space-xl);
            font-size: 14px;
            font-weight: 600;
            color: var(--neural-primary);
            box-shadow: var(--shadow-glow-soft);
        }

        .hero-title {
            font-size: clamp(48px, 8vw, 96px);
            font-weight: 900;
            line-height: 0.9;
            margin-bottom: var(--space-lg);
            background: var(--gradient-neural);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.03em;
            position: relative;
        }

        .hero-subtitle {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.3;
        }

        .hero-description {
            font-size: 18px;
            color: var(--text-tertiary);
            max-width: 720px;
            margin: 0 auto var(--space-2xl);
            line-height: 1.7;
        }

        /* Neural Interface Grid */
        .neural-interface {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--space-2xl);
            margin-bottom: var(--space-4xl);
        }

        @media (max-width: 1200px) {
            .neural-interface {
                grid-template-columns: 1fr;
                gap: var(--space-xl);
            }
        }

        /* Input Terminal */
        .input-terminal {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-2xl);
            padding: var(--space-2xl);
            box-shadow: var(--shadow-elevation-4);
            position: relative;
            overflow: hidden;
        }

        .input-terminal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
            opacity: 0.5;
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xl);
        }

        .terminal-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .terminal-status {
            display: flex;
            gap: var(--space-sm);
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neural-success);
            box-shadow: 0 0 8px var(--neural-success);
        }

        .terminal-dot:nth-child(2) { background: var(--neural-warning); box-shadow: 0 0 8px var(--neural-warning); }
        .terminal-dot:nth-child(3) { background: var(--neural-danger); box-shadow: 0 0 8px var(--neural-danger); }

        .input-group {
            position: relative;
            margin-bottom: var(--space-xl);
        }

        .input-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
            display: block;
        }

        .neural-input {
            width: 100%;
            padding: var(--space-lg) var(--space-xl);
            border: 2px solid var(--border-primary);
            border-radius: var(--radius-lg);
            background: var(--bg-elevated);
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 500;
            transition: all var(--transition-smooth);
            font-family: inherit;
            position: relative;
        }

        .neural-input:focus {
            outline: none;
            border-color: var(--neural-primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2), var(--shadow-elevation-2);
            transform: translateY(-2px);
        }

        .neural-input::placeholder {
            color: var(--text-muted);
        }

        .neural-button {
            width: 100%;
            padding: var(--space-lg) var(--space-xl);
            border: none;
            border-radius: var(--radius-lg);
            background: var(--gradient-neural);
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-smooth);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            box-shadow: var(--shadow-neural);
            font-family: inherit;
            min-height: 64px;
        }

        .neural-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow-glow-intense);
        }

        .neural-button:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .neural-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .button-content {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            z-index: 1;
        }

        .neural-icon {
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .processing-indicator {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Alternative Input */
        .alternative-section {
            margin-top: var(--space-xl);
            border-top: 1px solid var(--border-primary);
            padding-top: var(--space-xl);
        }

        .collapsible-trigger {
            width: 100%;
            background: none;
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-md);
            padding: var(--space-md) var(--space-lg);
            color: var(--text-tertiary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-smooth);
            font-family: inherit;
        }

        .collapsible-trigger:hover {
            background: var(--bg-elevated);
            border-color: var(--border-tertiary);
            color: var(--text-secondary);
        }

        .chevron-icon {
            width: 16px;
            height: 16px;
            transition: transform var(--transition-smooth);
            color: var(--neural-primary);
        }

        .collapsible-trigger[aria-expanded="true"] .chevron-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: all var(--transition-elegant);
        }

        .collapsible-content.open {
            max-height: 400px;
            margin-top: var(--space-md);
        }

        .neural-textarea {
            width: 100%;
            min-height: 120px;
            padding: var(--space-md) var(--space-lg);
            border: 2px solid var(--border-primary);
            border-radius: var(--radius-md);
            background: var(--bg-elevated);
            color: var(--text-primary);
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all var(--transition-smooth);
            line-height: 1.6;
        }

        .neural-textarea:focus {
            outline: none;
            border-color: var(--neural-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .secondary-button {
            width: 100%;
            margin-top: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            border: 1px solid var(--border-tertiary);
            border-radius: var(--radius-md);
            background: var(--bg-elevated);
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-smooth);
            font-family: inherit;
        }

        .secondary-button:hover:not(:disabled) {
            background: var(--bg-surface);
            border-color: var(--neural-primary);
            color: var(--text-primary);
        }

        /* Neural Analytics Panel */
        .analytics-panel {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-2xl);
            padding: var(--space-2xl);
            box-shadow: var(--shadow-elevation-4);
            position: relative;
            overflow: hidden;
        }

        .analytics-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
            opacity: 0.5;
        }

        .panel-header {
            margin-bottom: var(--space-xl);
        }

        .panel-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .panel-subtitle {
            font-size: 14px;
            color: var(--text-quaternary);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .metric-item {
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            text-align: center;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 800;
            color: var(--neural-primary);
            line-height: 1;
        }

        .metric-label {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: var(--space-xs);
        }

        .neural-visualization {
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            height: 200px;
            position: relative;
            overflow: hidden;
        }

        .viz-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
            font-size: 14px;
            font-style: italic;
        }

        /* Error Container */
        .error-container {
            margin-bottom: var(--space-xl);
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--neural-danger);
            border-radius: var(--radius-md);
            padding: var(--space-md) var(--space-lg);
            color: var(--neural-danger);
            text-align: center;
            font-weight: 500;
            animation: slideIn var(--transition-smooth);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Results Section */
        .results-section {
            opacity: 0;
            transform: translateY(40px);
            transition: all var(--transition-physics);
            display: none;
            margin-bottom: var(--space-4xl);
        }

        .results-section.visible {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .results-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .results-subtitle {
            font-size: 16px;
            color: var(--text-tertiary);
        }

        /* Premium Score Display */
        .score-showcase {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-2xl);
            padding: var(--space-3xl);
            margin-bottom: var(--space-2xl);
            box-shadow: var(--shadow-elevation-4);
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .score-showcase::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
        }

        .score-display {
            position: relative;
            z-index: 2;
        }

        .score-number {
            font-size: 96px;
            font-weight: 900;
            line-height: 0.8;
            margin-bottom: var(--space-md);
            position: relative;
            font-feature-settings: 'tnum';
        }

        .score-indicator-ring {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, transparent 0deg, currentColor 5deg, transparent 10deg);
            margin: 0 auto var(--space-lg);
            position: relative;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .score-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-quaternary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-xl);
        }

        /* Premium Bias Scale */
        .bias-scale-container {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-2xl);
            padding: var(--space-2xl);
            margin-bottom: var(--space-2xl);
            box-shadow: var(--shadow-elevation-4);
            position: relative;
            overflow: hidden;
        }

        .bias-scale-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
        }

        .scale-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .scale-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }

        .scale-subtitle {
            font-size: 14px;
            color: var(--text-quaternary);
        }

        .bias-scale-track {
            position: relative;
            height: 24px;
            background: var(--gradient-bias-spectrum);
            border-radius: var(--radius-md);
            margin: var(--space-2xl) 0;
            box-shadow: var(--shadow-inset);
            overflow: hidden;
        }

        .scale-shimmer {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
            animation: shimmer-slide 3s infinite;
        }

        @keyframes shimmer-slide {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .scale-ticks {
            position: absolute;
            top: -4px;
            left: 0;
            right: 0;
            bottom: -4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-md);
        }

        .scale-tick {
            width: 3px;
            height: 32px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-elevation-1);
        }

        .scale-marker {
            position: absolute;
            top: 50%;
            width: 36px;
            height: 36px;
            background: white;
            border: 4px solid var(--bg-deep);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 
                0 0 0 2px rgba(255, 255, 255, 0.5),
                var(--shadow-elevation-3);
            transition: all var(--transition-physics);
            z-index: 10;
            cursor: pointer;
        }

        .scale-marker:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-lg);
        }

        .scale-label {
            text-align: center;
            flex: 1;
        }

        .scale-label-primary {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .scale-label-secondary {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .scale-label:first-child .scale-label-primary { color: var(--bias-left-primary); }
        .scale-label:last-child .scale-label-primary { color: var(--bias-right-primary); }

        /* Analysis Dashboard */
        .analysis-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        @media (max-width: 768px) {
            .analysis-dashboard {
                grid-template-columns: 1fr;
            }
        }

        .analysis-card {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            box-shadow: var(--shadow-elevation-3);
            position: relative;
            overflow: hidden;
        }

        .analysis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
            opacity: 0.5;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .card-icon {
            width: 32px;
            height: 32px;
            background: var(--gradient-neural);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            font-weight: 700;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .ai-badge {
            background: var(--gradient-neural);
            color: white;
            padding: 2px var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: auto;
        }

        .explanation-text {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: var(--space-lg);
            padding: var(--space-lg);
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--neural-primary);
        }

        .evidence-section {
            margin-bottom: var(--space-lg);
        }

        .evidence-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .evidence-chips {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .evidence-chip {
            background: var(--bg-elevated);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-full);
            padding: var(--space-sm) var(--space-md);
            font-size: 12px;
            font-weight: 500;
            transition: all var(--transition-smooth);
            cursor: pointer;
        }

        .evidence-chip:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-1);
        }

        .evidence-chip.positive {
            border-color: var(--bias-right-primary);
            color: var(--bias-right-primary);
            background: rgba(220, 38, 38, 0.1);
        }

        .evidence-chip.negative {
            border-color: var(--bias-left-primary);
            color: var(--bias-left-primary);
            background: rgba(37, 99, 235, 0.1);
        }

        /* Bias Sentences */
        .sentences-section {
            margin-top: var(--space-lg);
        }

        .sentences-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bias-sentence {
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            transition: all var(--transition-smooth);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .bias-sentence:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-elevation-2);
        }

        .bias-sentence::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: currentColor;
        }

        .bias-sentence.left-positive { color: var(--bias-left-primary); }
        .bias-sentence.left-negative { color: var(--bias-right-primary); }
        .bias-sentence.right-positive { color: var(--bias-right-primary); }
        .bias-sentence.right-negative { color: var(--bias-left-primary); }
        .bias-sentence.left-framing { color: var(--bias-left-primary); }
        .bias-sentence.right-framing { color: var(--bias-right-primary); }
        .bias-sentence.emotional-language { color: var(--neural-warning); }

        .sentence-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--space-sm);
            opacity: 0.9;
        }

        .sentence-text {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* History Section */
        .history-section {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin-bottom: var(--space-2xl);
            box-shadow: var(--shadow-elevation-3);
            position: relative;
            overflow: hidden;
        }

        .history-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
            opacity: 0.5;
        }

        .history-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
        }

        .history-item {
            background: var(--bg-elevated);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-md);
            cursor: pointer;
            transition: all var(--transition-smooth);
        }

        .history-item:hover {
            background: var(--bg-surface);
            border-color: var(--border-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-1);
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .history-score {
            font-weight: 700;
            font-size: 16px;
        }

        .history-time {
            font-size: 12px;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .history-url {
            font-size: 13px;
            color: var(--text-tertiary);
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .no-history {
            text-align: center;
            color: var(--text-muted);
            font-style: italic;
            padding: var(--space-2xl);
        }

        /* Footer Section */
        .footer-section {
            background: var(--bg-glass-heavy);
            backdrop-filter: var(--blur-heavy);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            box-shadow: var(--shadow-elevation-3);
            position: relative;
            overflow: hidden;
        }

        .footer-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-neural);
            opacity: 0.5;
        }

        .footer-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-md);
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .footer-title::after {
            content: "ðŸ§ ";
            font-size: 18px;
        }

        .footer-description {
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-tertiary);
        }

        /* Dev Panel */
        .dev-panel {
            background: var(--bg-deep);
            border: 2px solid var(--neural-success);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-top: var(--space-lg);
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }

        .dev-panel.visible {
            display: block;
            animation: fadeIn var(--transition-smooth);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .dev-section {
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--border-primary);
        }

        .dev-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .dev-label {
            color: var(--neural-success);
            font-weight: 600;
            display: block;
            margin-bottom: var(--space-xs);
        }

        .dev-value {
            color: var(--text-tertiary);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .app-container {
                padding: var(--space-xl) var(--space-lg);
            }
        }

        @media (max-width: 768px) {
            .app-container {
                padding: var(--space-lg) var(--space-md);
            }

            .enterprise-header {
                flex-direction: column;
                gap: var(--space-lg);
                text-align: center;
            }

            .hero-title {
                font-size: 48px;
            }

            .neural-interface {
                grid-template-columns: 1fr;
            }

            .input-terminal,
            .analytics-panel {
                padding: var(--space-lg);
            }

            .score-number {
                font-size: 64px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus styles */
        .neural-button:focus,
        .neural-input:focus,
        .neural-textarea:focus,
        .collapsible-trigger:focus,
        .secondary-button:focus,
        .history-item:focus {
            outline: 2px solid var(--neural-primary);
            outline-offset: 2px;
        }

        /* Safe area for mobile devices */
        .safe-area {
            padding-bottom: env(safe-area-inset-bottom, var(--space-lg));
        }
    </style>
</head>
<body>
    <!-- Neural Particle System -->
    <div class="neural-particles" id="neural-particles"></div>

    <div class="app-container">
        <!-- Enterprise Header -->
        <header class="enterprise-header">
            <div class="enterprise-logo">
                <div class="logo-mark">BL</div>
                <div class="logo-text">
                    <div class="logo-title">BiasLens</div>
                    <div class="logo-subtitle">Enterprise Neural Platform</div>
                </div>
            </div>
            <div class="status-indicators">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Neural Engine Active</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot" style="background: var(--neural-accent); box-shadow: 0 0 10px var(--neural-accent);"></div>
                    <span>Real-time Analysis</span>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-badge">
                <div class="neural-icon">AI</div>
                <span>Next-Generation Media Intelligence</span>
            </div>
            <h1 class="hero-title">Neural Bias Detection</h1>
            <p class="hero-subtitle">Enterprise-Grade Political Analysis Platform</p>
            <p class="hero-description">
                Harness advanced neural networks and contextual AI to decode political bias in media content with scientific precision. Our proprietary algorithms analyze linguistic patterns, sentiment distribution, and argumentative structures to deliver actionable intelligence.
            </p>
        </section>

        <!-- Neural Interface -->
        <section class="neural-interface">
            <!-- Input Terminal -->
            <div class="input-terminal">
                <div class="terminal-header">
                    <h2 class="terminal-title">Analysis Terminal</h2>
                    <div class="terminal-status">
                        <div class="terminal-dot"></div>
                        <div class="terminal-dot"></div>
                        <div class="terminal-dot"></div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="url-input" class="input-label">Article URL</label>
                    <input 
                        type="url" 
                        id="url-input" 
                        class="neural-input" 
                        placeholder="https://example.com/news-article" 
                        aria-label="Article URL for neural analysis"
                    >
                </div>

                <button id="analyze-btn" class="neural-button">
                    <div class="button-content" id="button-content">
                        <div class="neural-icon">AI</div>
                        <span id="analyze-text">Initialize Neural Analysis</span>
                    </div>
                    <div class="processing-indicator" id="processing-indicator" style="display: none;"></div>
                </button>

                <div class="alternative-section">
                    <button class="collapsible-trigger" aria-expanded="false" aria-controls="text-input-content">
                        <span>Alternative: Direct Text Input</span>
                        <span class="chevron-icon">â–¼</span>
                    </button>
                    <div class="collapsible-content" id="text-input-content">
                        <label for="article-text" class="input-label">Article Content</label>
                        <textarea 
                            id="article-text" 
                            class="neural-textarea" 
                            placeholder="Paste complete article text for direct neural processing..."
                            aria-label="Article text for manual analysis"
                        ></textarea>
                        <button id="analyze-text-btn" class="secondary-button">
                            Process Text
                        </button>
                    </div>
                </div>
            </div>

            <!-- Analytics Panel -->
            <div class="analytics-panel">
                <div class="panel-header">
                    <h3 class="panel-title">Live Metrics</h3>
                    <p class="panel-subtitle">Real-time system performance</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">99.7%</div>
                        <div class="metric-label">Accuracy</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">847ms</div>
                        <div class="metric-label">Avg Processing</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">2.4M+</div>
                        <div class="metric-label">Articles Analyzed</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">156</div>
                        <div class="metric-label">Neural Nodes</div>
                    </div>
                </div>

                <div class="neural-visualization">
                    <div class="viz-placeholder">
                        Neural Network Visualization
                        <br><small>Real-time processing patterns</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Error Container -->
        <div class="error-container" id="error-container"></div>

        <!-- Results Section -->
        <div id="results-section" class="results-section">
            <div class="results-header">
                <h2 class="results-title">Neural Analysis Complete</h2>
                <p class="results-subtitle">Advanced AI processing reveals the following insights</p>
            </div>

            <!-- Score Showcase -->
            <div class="score-showcase">
                <div class="score-display">
                    <div class="score-indicator-ring" id="score-indicator-ring"></div>
                    <div id="score-number" class="score-number">0</div>
                    <div class="score-label">Political Bias Index</div>
                </div>
            </div>

            <!-- Bias Scale -->
            <div class="bias-scale-container">
                <div class="scale-header">
                    <h3 class="scale-title">Bias Spectrum Analysis</h3>
                    <p class="scale-subtitle">Contextual positioning on the political spectrum</p>
                </div>
                
                <div class="bias-scale-track">
                    <div class="scale-shimmer"></div>
                    <div class="scale-ticks">
                        <div class="scale-tick"></div>
                        <div class="scale-tick"></div>
                        <div class="scale-tick"></div>
                        <div class="scale-tick"></div>
                        <div class="scale-tick"></div>
                    </div>
                    <div id="scale-marker" class="scale-marker"></div>
                </div>

                <div class="scale-labels">
                    <div class="scale-label">
                        <div class="scale-label-primary">Liberal</div>
                        <div class="scale-label-secondary">-100</div>
                    </div>
                    <div class="scale-label">
                        <div class="scale-label-primary">Moderate Left</div>
                        <div class="scale-label-secondary">-50</div>
                    </div>
                    <div class="scale-label">
                        <div class="scale-label-primary">Neutral</div>
                        <div class="scale-label-secondary">0</div>
                    </div>
                    <div class="scale-label">
                        <div class="scale-label-primary">Moderate Right</div>
                        <div class="scale-label-secondary">+50</div>
                    </div>
                    <div class="scale-label">
                        <div class="scale-label-primary">Conservative</div>
                        <div class="scale-label-secondary">+100</div>
                    </div>
                </div>
            </div>

            <!-- Analysis Dashboard -->
            <div class="analysis-dashboard">
                <!-- AI Analysis Card -->
                <div class="analysis-card">
                    <div class="card-header">
                        <div class="card-icon">ðŸ§ </div>
                        <h3 class="card-title">AI Analysis</h3>
                        <div class="ai-badge">Neural</div>
                    </div>
                    
                    <div id="explanation-text" class="explanation-text"></div>

                    <div class="evidence-section">
                        <h4 class="evidence-title">Evidence Markers</h4>
                        <div id="evidence-chips" class="evidence-chips"></div>
                    </div>
                </div>

                <!-- Pattern Recognition Card -->
                <div class="analysis-card">
                    <div class="card-header">
                        <div class="card-icon">ðŸ”</div>
                        <h3 class="card-title">Pattern Recognition</h3>
                        <div class="ai-badge">Deep Learning</div>
                    </div>

                    <div class="sentences-section">
                        <h4 class="sentences-title">Detected Bias Patterns</h4>
                        <div id="bias-sentences-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <section class="history-section">
            <h2 class="history-title">Analysis History</h2>
            <div id="history-list">
                <div id="no-history" class="no-history">
                    No previous analyses â€” initialize your first neural scan above
                </div>
            </div>
        </section>

        <!-- Footer Section -->
        <section class="footer-section">
            <h2 class="footer-title" id="footer-title">Neural Architecture</h2>
            <p class="footer-description">
                BiasLens Enterprise utilizes a proprietary neural architecture combining transformer-based language models, contextual sentiment analysis, and multi-dimensional bias detection algorithms. Our system processes over 150 linguistic features through 12 neural network layers, delivering enterprise-grade accuracy with sub-second response times. Each analysis leverages real-time data from our continuously updated training corpus of 2.4M+ professionally annotated articles.
                <br><br>
                <strong>Powered by advanced AI</strong> â€” Results are intelligent estimates requiring human interpretation and critical analysis.
            </p>
            
            <div id="dev-panel" class="dev-panel">
                <div class="dev-section">
                    <span class="dev-label">Proxy Gateway:</span>
                    <div class="dev-value" id="dev-proxy">Standby</div>
                </div>
                <div class="dev-section">
                    <span class="dev-label">Neural Features:</span>
                    <div class="dev-value" id="dev-features">Inactive</div>
                </div>
                <div class="dev-section">
                    <span class="dev-label">Signal Strength:</span>
                    <div class="dev-value" id="dev-lexicon">Monitoring</div>
                </div>
                <div class="dev-section">
                    <span class="dev-label">Outlet Bias Correction:</span>
                    <div class="dev-value" id="dev-outlet">Neutral</div>
                </div>
                <div class="dev-section">
                    <span class="dev-label">Score Normalization:</span>
                    <div class="dev-value" id="dev-norm">Standby</div>
                </div>
                <div class="dev-section">
                    <span class="dev-label">Processing Latency:</span>
                    <div class="dev-value" id="dev-timing">Ready</div>
                </div>
            </div>
        </section>

        <div class="safe-area"></div>
    </div>

    <script>
        'use strict';

        // Configuration
        const CONFIG = {
            maxWordCount: 2500,
            proxyTimeout: 7000,
            maxRetries: 3,
            storageVersion: 1,
            storageKey: 'biaslens_enterprise_v1',
            maxHistoryItems: 5
        };

        // CORS Proxy rotation
        const PROXIES = [
            'https://corsproxy.io/?',
            'https://cors-anywhere.herokuapp.com/',
            'https://api.allorigins.win/raw?url=',
            'https://thingproxy.freeboard.io/fetch/'
        ];

        // Outlet bias priors
        const OUTLET_PRIORS = {
            'cnn.com': -5, 'msnbc.com': -6, 'nytimes.com': -3, 'washingtonpost.com': -3, 'huffpost.com': -7,
            'foxnews.com': 6, 'breitbart.com': 8, 'dailywire.com': 7, 'nypost.com': 4, 'wsj.com': 2,
            'reuters.com': 0, 'ap.org': 0, 'apnews.com': 0, 'bbc.com': -1, 'npr.org': -2
        };

        // Application state
        let currentAnalysis = null;
        let devPanelTaps = 0;
        let devPanelVisible = false;

        // DOM elements
        const elements = {
            urlInput: document.getElementById('url-input'),
            analyzeBtn: document.getElementById('analyze-btn'),
            buttonContent: document.getElementById('button-content'),
            analyzeText: document.getElementById('analyze-text'),
            processingIndicator: document.getElementById('processing-indicator'),
            articleText: document.getElementById('article-text'),
            analyzeTextBtn: document.getElementById('analyze-text-btn'),
            errorContainer: document.getElementById('error-container'),
            resultsSection: document.getElementById('results-section'),
            scoreNumber: document.getElementById('score-number'),
            scoreIndicatorRing: document.getElementById('score-indicator-ring'),
            scaleMarker: document.getElementById('scale-marker'),
            explanationText: document.getElementById('explanation-text'),
            evidenceChips: document.getElementById('evidence-chips'),
            biasSentencesList: document.getElementById('bias-sentences-list'),
            historyList: document.getElementById('history-list'),
            noHistory: document.getElementById('no-history'),
            footerTitle: document.getElementById('footer-title'),
            devPanel: document.getElementById('dev-panel'),
            devProxy: document.getElementById('dev-proxy'),
            devFeatures: document.getElementById('dev-features'),
            devLexicon: document.getElementById('dev-lexicon'),
            devOutlet: document.getElementById('dev-outlet'),
            devNorm: document.getElementById('dev-norm'),
            devTiming: document.getElementById('dev-timing')
        };

        // Initialize neural particle system
        function initNeuralParticles() {
            const container = document.getElementById('neural-particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // Utility functions
        function isValidUrl(string) {
            try {
                const url = new URL(string);
                return ['http:', 'https:'].includes(url.protocol);
            } catch {
                return false;
            }
        }

        function sanitizeUrl(url) {
            if (!url) return null;
            url = url.trim();
            if (!url.startsWith('http')) {
                url = 'https://' + url;
            }
            return isValidUrl(url) ? url : null;
        }

        function showError(message) {
            elements.errorContainer.innerHTML = `<div class="error-message">${message}</div>`;
            setTimeout(() => {
                elements.errorContainer.innerHTML = '';
            }, 5000);
        }

        function setLoading(isLoading) {
            elements.analyzeBtn.disabled = isLoading;
            elements.analyzeTextBtn.disabled = isLoading;
            elements.buttonContent.style.display = isLoading ? 'none' : 'flex';
            elements.processingIndicator.style.display = isLoading ? 'block' : 'none';
        }

        // Storage functions
        function saveToStorage(analysis) {
            try {
                const stored = localStorage.getItem(CONFIG.storageKey);
                let history = stored ? JSON.parse(stored) : { version: CONFIG.storageVersion, analyses: [] };
                
                if (history.version !== CONFIG.storageVersion) {
                    history = { version: CONFIG.storageVersion, analyses: [] };
                }

                history.analyses.unshift({
                    timestamp: Date.now(),
                    url: analysis.url || 'Direct Input',
                    title: analysis.title || 'Untitled Analysis',
                    score: analysis.score
                });

                history.analyses = history.analyses.slice(0, CONFIG.maxHistoryItems);
                localStorage.setItem(CONFIG.storageKey, JSON.stringify(history));
                renderHistory();
            } catch (error) {
                console.warn('Storage operation failed:', error);
            }
        }

        function loadFromStorage() {
            try {
                const stored = localStorage.getItem(CONFIG.storageKey);
                if (!stored) return [];
                
                const history = JSON.parse(stored);
                if (history.version !== CONFIG.storageVersion) return [];
                
                return history.analyses || [];
            } catch (error) {
                console.warn('Storage retrieval failed:', error);
                return [];
            }
        }

        function renderHistory() {
            const history = loadFromStorage();
            
            if (history.length === 0) {
                elements.noHistory.style.display = 'block';
                return;
            }

            elements.noHistory.style.display = 'none';
            
            const historyItems = history.map(item => {
                const date = new Date(item.timestamp).toLocaleDateString();
                const scoreColor = item.score > 0 ? 'var(--bias-right-primary)' : 
                                 item.score < 0 ? 'var(--bias-left-primary)' : 'var(--text-secondary)';
                
                return `
                    <div class="history-item" tabindex="0" role="button" onclick="restoreAnalysis(${item.timestamp})" onkeydown="handleHistoryKeydown(event, ${item.timestamp})">
                        <div class="history-meta">
                            <span class="history-score" style="color: ${scoreColor}">${item.score > 0 ? '+' : ''}${item.score}</span>
                            <span class="history-time">${date}</span>
                        </div>
                        <div class="history-url">${item.url}</div>
                    </div>
                `;
            }).join('');

            elements.historyList.innerHTML = historyItems;
        }

        window.restoreAnalysis = function(timestamp) {
            const history = loadFromStorage();
            const item = history.find(h => h.timestamp === timestamp);
            if (!item) return;

            if (item.url !== 'Direct Input') {
                elements.urlInput.value = item.url;
            }
            
            showError(`Analysis restored: ${item.title} (Score: ${item.score})`);
        };

        window.handleHistoryKeydown = function(event, timestamp) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                restoreAnalysis(timestamp);
            }
        };

        // Content extraction
        function extractContent(html, url) {
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                const unwanted = doc.querySelectorAll('script, style, nav, footer, aside, header, .ad, .advertisement, .sidebar, .related, .comments, .social, .share');
                unwanted.forEach(el => el.remove());

                let title = '';
                const titleEl = doc.querySelector('title, h1, .title, .headline');
                if (titleEl) {
                    title = titleEl.textContent.trim();
                }

                const contentSelectors = [
                    'article', '.article-content', '.content', '.post-content', 
                    '.entry-content', 'main', '.main-content', '.story-body', '.article-body'
                ];

                let content = '';
                for (const selector of contentSelectors) {
                    const element = doc.querySelector(selector);
                    if (element) {
                        content = element.textContent;
                        break;
                    }
                }

                if (!content) {
                    const body = doc.querySelector('body');
                    if (body) {
                        content = body.textContent;
                    }
                }

                content = content
                    .replace(/\s+/g, ' ')
                    .replace(/[""'']/g, '"')
                    .replace(/[â€“â€”]/g, '-')
                    .trim();

                const words = content.split(/\s+/);
                if (words.length > CONFIG.maxWordCount) {
                    content = words.slice(0, CONFIG.maxWordCount).join(' ') + '...';
                }

                return { title, content, wordCount: words.length };
            } catch (error) {
                throw new Error('Content extraction failed');
            }
        }

        // Proxy rotation
        async function fetchWithProxies(url) {
            const startTime = Date.now();
            let lastError = null;

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), CONFIG.proxyTimeout);
                
                const response = await fetch(url, {
                    signal: controller.signal,
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (compatible; BiasLens/1.0)'
                    }
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const text = await response.text();
                    updateDevPanel({ proxy: 'Direct Connection', timing: Date.now() - startTime });
                    return text;
                }
            } catch (error) {
                lastError = error;
            }

            for (let i = 0; i < PROXIES.length; i++) {
                const proxy = PROXIES[i];
                const proxyName = `Neural Gateway ${i + 1}`;
                
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), CONFIG.proxyTimeout);
                    
                    const proxyUrl = proxy + encodeURIComponent(url);
                    const response = await fetch(proxyUrl, {
                        signal: controller.signal,
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (compatible; BiasLens/1.0)'
                        }
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (response.ok) {
                        const text = await response.text();
                        updateDevPanel({ proxy: proxyName, timing: Date.now() - startTime });
                        return text;
                    }
                } catch (error) {
                    lastError = error;
                    console.warn(`${proxyName} failed:`, error.message);
                }
            }

            throw new Error(`All neural gateways failed. Last error: ${lastError?.message || 'Unknown'}`);
        }

        // Neural bias detection algorithm
        function analyzeBias(text, title = '', url = '') {
            const startTime = Date.now();
            
            const normalizedText = text.toLowerCase();
            const sentences = text.split(/[.!?]+/).map(s => s.trim()).filter(s => s.length > 10);
            
            const politicalEntities = {
                left: ['democrats', 'biden', 'harris', 'pelosi', 'schumer', 'aoc', 'sanders', 'warren'],
                right: ['republicans', 'trump', 'desantis', 'mcconnell', 'cruz', 'hawley', 'greene'],
                neutral: ['congress', 'senate', 'house', 'government', 'administration', 'officials']
            };

            let features = {};
            let evidenceTerms = [];
            let biasSentences = [];

            function analyzeContextualSentiment() {
                let leftSentiment = 0;
                let rightSentiment = 0;
                const contextWindow = 20;
                
                sentences.forEach(sentence => {
                    const words = sentence.toLowerCase().split(/\s+/);
                    let sentenceBias = 0;
                    let sentenceDirection = null;
                    let foundEntities = [];
                    
                    words.forEach((word, index) => {
                        let entityBias = null;
                        if (politicalEntities.left.some(entity => word.includes(entity))) {
                            entityBias = 'left';
                            foundEntities.push(word);
                        }
                        if (politicalEntities.right.some(entity => word.includes(entity))) {
                            entityBias = 'right';
                            foundEntities.push(word);
                        }
                        
                        if (entityBias) {
                            const start = Math.max(0, index - contextWindow);
                            const end = Math.min(words.length, index + contextWindow);
                            const context = words.slice(start, end).join(' ');
                            
                            const positiveContext = /\b(successful|effective|strong|praised|support|defend|champion|fight for|stand up|deliver|accomplish|achieve|brilliant|outstanding|excellent|breakthrough|victory)\b/g;
                            const negativeContext = /\b(failed|ineffective|weak|criticized|attack|oppose|undermine|damage|hurt|threaten|dangerous|extreme|ridiculous|absurd|disaster|crisis|scandal)\b/g;
                            
                            const positiveMatches = (context.match(positiveContext) || []).length;
                            const negativeMatches = (context.match(negativeContext) || []).length;
                            const sentimentScore = positiveMatches - negativeMatches;
                            
                            if (Math.abs(sentimentScore) > 0) {
                                sentenceBias += sentimentScore;
                                sentenceDirection = entityBias;
                            }
                            
                            if (entityBias === 'left') {
                                leftSentiment += sentimentScore;
                            } else {
                                rightSentiment += sentimentScore;
                            }
                            
                            if (Math.abs(sentimentScore) > 0) {
                                evidenceTerms.push({
                                    term: word,
                                    context: sentimentScore > 0 ? 'positive' : 'negative',
                                    strength: Math.abs(sentimentScore),
                                    bias: entityBias
                                });
                            }
                        }
                    });
                    
                    if (Math.abs(sentenceBias) > 0 && foundEntities.length > 0) {
                        const finalBias = sentenceBias > 0 ? 
                            (sentenceDirection === 'left' ? 'left-positive' : 'right-positive') :
                            (sentenceDirection === 'left' ? 'left-negative' : 'right-negative');
                            
                        biasSentences.push({
                            text: sentence.trim(),
                            bias: finalBias,
                            strength: Math.abs(sentenceBias),
                            entities: foundEntities,
                            type: 'contextual'
                        });
                    }
                });
                
                return { leftSentiment, rightSentiment };
            }

            function analyzeLinguisticPatterns() {
                let patterns = { certainty: 0, hedging: 0, emotional: 0, factual: 0 };
                
                const certaintyMarkers = /\b(clearly|obviously|undoubtedly|definitely|certainly|without question|no doubt|absolutely|unquestionably)\b/gi;
                const hedgingMarkers = /\b(might|could|perhaps|possibly|allegedly|reportedly|sources say|appears to|seems to|may have|reportedly)\b/gi;
                
                patterns.certainty = (normalizedText.match(certaintyMarkers) || []).length;
                patterns.hedging = (normalizedText.match(hedgingMarkers) || []).length;
                
                const emotionalMarkers = /\b(outrageous|shocking|devastating|alarming|dangerous|disaster|crisis|betrayal|attack|defend|fight|slams|blasts|destroys|explosive|bombshell)\b/gi;
                const factualMarkers = /\b(according to|data shows|study found|research indicates|statistics|analysis|report|survey|documented|verified)\b/gi;
                
                patterns.emotional = (normalizedText.match(emotionalMarkers) || []).length;
                patterns.factual = (normalizedText.match(factualMarkers) || []).length;
                
                sentences.forEach(sentence => {
                    const sentenceLower = sentence.toLowerCase();
                    const emotionalMatches = (sentenceLower.match(emotionalMarkers) || []).length;
                    const certaintyMatches = (sentenceLower.match(certaintyMarkers) || []).length;
                    
                    if (emotionalMatches > 1 || certaintyMatches > 1) {
                        const biasStrength = emotionalMatches + certaintyMatches;
                        biasSentences.push({
                            text: sentence.trim(),
                            bias: 'emotional-language',
                            strength: biasStrength,
                            type: 'linguistic',
                            indicators: emotionalMatches > 0 ? 'emotional' : 'certainty'
                        });
                    }
                });
                
                return patterns;
            }

            function analyzeSourcePatterns() {
                const anonymousSources = /\b(sources say|unnamed official|according to sources|insiders report|leaked|off the record|anonymous sources)\b/gi;
                const namedSources = /\b(said|stated|announced|declared|confirmed|according to [A-Z][a-z]+ [A-Z][a-z]+|spokesperson said)\b/gi;
                
                const anonymousCount = (normalizedText.match(anonymousSources) || []).length;
                const namedCount = (normalizedText.match(namedSources) || []).length;
                
                const sourceScore = namedCount - (anonymousCount * 0.5);
                
                return { sourceScore, anonymousCount, namedCount };
            }

            function analyzeArgumentStructure() {
                const balanceIndicators = /\b(however|but|on the other hand|meanwhile|in contrast|alternatively|critics argue|supporters say|both sides|balanced view)\b/gi;
                const onesided = /\b(all|every|always|never|completely|totally|entirely|absolutely no|zero|none|without exception)\b/gi;
                
                const balanceCount = (normalizedText.match(balanceIndicators) || []).length;
                const onesidedCount = (normalizedText.match(onesided) || []).length;
                
                const structureScore = balanceCount - (onesidedCount * 0.3);
                
                return { structureScore, balanceCount, onesidedCount };
            }

            function analyzeTopicFraming() {
                const economicLeft = /\b(inequality|corporate greed|tax the rich|worker rights|minimum wage|wealth gap|social safety net)\b/gi;
                const economicRight = /\b(job creators|free market|economic growth|business friendly|tax burden|regulation hurts|free enterprise)\b/gi;
                
                const socialLeft = /\b(social justice|systemic racism|reproductive rights|lgbtq rights|inclusion|equity|diversity)\b/gi;
                const socialRight = /\b(traditional values|family values|religious freedom|law and order|personal responsibility|traditional marriage)\b/gi;
                
                const govLeft = /\b(public investment|government programs|safety net|public option|infrastructure|public service)\b/gi;
                const govRight = /\b(government overreach|bureaucracy|red tape|states rights|limited government|individual liberty)\b/gi;
                
                const leftFraming = (normalizedText.match(economicLeft) || []).length + 
                                  (normalizedText.match(socialLeft) || []).length +
                                  (normalizedText.match(govLeft) || []).length;
                
                const rightFraming = (normalizedText.match(economicRight) || []).length + 
                                   (normalizedText.match(socialRight) || []).length +
                                   (normalizedText.match(govRight) || []).length;
                
                const framingBias = rightFraming - leftFraming;
                
                sentences.forEach(sentence => {
                    const sentenceLower = sentence.toLowerCase();
                    const leftMatches = (sentenceLower.match(economicLeft) || []).length +
                                       (sentenceLower.match(socialLeft) || []).length +
                                       (sentenceLower.match(govLeft) || []).length;
                    const rightMatches = (sentenceLower.match(economicRight) || []).length +
                                        (sentenceLower.match(socialRight) || []).length +
                                        (sentenceLower.match(govRight) || []).length;
                    
                    if (leftMatches > 0 || rightMatches > 0) {
                        const netBias = rightMatches - leftMatches;
                        if (Math.abs(netBias) > 0) {
                            biasSentences.push({
                                text: sentence.trim(),
                                bias: netBias > 0 ? 'right-framing' : 'left-framing',
                                strength: Math.abs(netBias),
                                type: 'framing'
                            });
                        }
                    }
                });
                
                return { framingBias, leftFraming, rightFraming };
            }

            // Execute analysis modules
            const sentimentAnalysis = analyzeContextualSentiment();
            const linguisticPatterns = analyzeLinguisticPatterns();
            const sourcePatterns = analyzeSourcePatterns();
            const argumentStructure = analyzeArgumentStructure();
            const topicFraming = analyzeTopicFraming();

            // Neural scoring algorithm
            let biasScore = 0;
            
            const sentimentScore = sentimentAnalysis.rightSentiment - sentimentAnalysis.leftSentiment;
            biasScore += sentimentScore * 4;
            features.sentiment = sentimentScore;
            
            biasScore += topicFraming.framingBias * 2.5;
            features.framing = topicFraming.framingBias;
            
            const linguisticBias = (linguisticPatterns.certainty - linguisticPatterns.hedging) + 
                                 (linguisticPatterns.emotional - linguisticPatterns.factual) * 0.5;
            biasScore += linguisticBias * 0.8;
            features.linguistic = linguisticBias;
            
            biasScore -= argumentStructure.structureScore * 0.5;
            features.structure = argumentStructure.structureScore;
            
            biasScore -= sourcePatterns.sourceScore * 0.2;
            features.sources = sourcePatterns.sourceScore;

            // Outlet prior adjustment
            let outletPrior = 0;
            if (url) {
                try {
                    const hostname = new URL(url).hostname.toLowerCase().replace('www.', '');
                    outletPrior = OUTLET_PRIORS[hostname] || 0;
                    biasScore += outletPrior;
                } catch (error) {
                    // Invalid URL handling
                }
            }

            // Title analysis enhancement
            if (title) {
                const titleSentiment = title.toLowerCase();
                let titleBias = 0;
                
                if (/\b(slams|blasts|destroys|demolishes|attacks|hits|strikes|crushes)\b/.test(titleSentiment)) titleBias += 2;
                if (/\b(defends|supports|champions|stands up|fights for|backs)\b/.test(titleSentiment)) titleBias -= 2;
                if (/\b(crisis|disaster|chaos|failure|threatens|scandal|controversy)\b/.test(titleSentiment)) titleBias += 1.5;
                if (/\b(progress|success|achievement|breakthrough|delivers|accomplishes)\b/.test(titleSentiment)) titleBias -= 1.5;
                
                biasScore += titleBias * 1.5;
                features.titleBias = titleBias;
            }

            // Advanced normalization using hyperbolic tangent
            const normalizedScore = Math.round(Math.tanh(biasScore / 15) * 100);
            
            // Generate neural explanation
            const explanation = generateNeuralExplanation(normalizedScore, features, evidenceTerms);
            
            const analysis = {
                score: normalizedScore,
                explanation,
                evidence: evidenceTerms.slice(0, 8),
                biasSentences: biasSentences.sort((a, b) => b.strength - a.strength).slice(0, 5),
                features,
                outletPrior,
                timing: Date.now() - startTime,
                rawScore: biasScore,
                wordCount: text.split(/\s+/).length,
                url,
                title
            };

            updateDevPanel(analysis);
            return analysis;
        }

        function generateNeuralExplanation(score, features, evidenceTerms) {
            let explanation = '';
            
            if (Math.abs(score) < 10) {
                explanation = 'Neural analysis indicates balanced reporting with minimal partisan signals detected across multiple linguistic dimensions.';
            } else if (score < -30) {
                explanation = 'Neural networks detected strong liberal bias patterns through systematic favorable treatment of progressive viewpoints and critical framing of conservative positions.';
            } else if (score < -10) {
                explanation = 'Neural analysis reveals moderate liberal bias with detectable preference for progressive narrative frameworks and policy positions.';
            } else if (score > 30) {
                explanation = 'Neural networks detected strong conservative bias patterns through systematic favorable treatment of traditional viewpoints and critical framing of liberal positions.';
            } else if (score > 10) {
                explanation = 'Neural analysis reveals moderate conservative bias with detectable preference for traditional narrative frameworks and policy positions.';
            }

            const sentimentSignal = Math.abs(features.sentiment || 0);
            const framingSignal = Math.abs(features.framing || 0);
            const linguisticSignal = Math.abs(features.linguistic || 0);

            if (sentimentSignal > framingSignal && sentimentSignal > linguisticSignal) {
                explanation += ' Primary bias vectors emerge from contextual sentiment patterns surrounding political entities and policy discussions.';
            } else if (framingSignal > linguisticSignal) {
                explanation += ' Bias manifests primarily through systematic topic framing and ideological positioning rather than explicit partisan statements.';
            } else if (linguisticSignal > 1) {
                explanation += ' Detection algorithms identified bias through linguistic certainty patterns and emotional language deployment throughout the content.';
            }

            if (features.sources && features.sources < -2) {
                explanation += ' Analysis noted elevated reliance on anonymous sourcing which may indicate speculative or incomplete reporting.';
            } else if (features.structure && features.structure < -2) {
                explanation += ' Content structure analysis reveals limited perspective diversity and insufficient counterpoint representation.';
            }

            return explanation;
        }

        function updateDevPanel(analysis) {
            if (!analysis) return;
            
            elements.devProxy.textContent = analysis.proxy || 'Standby';
            elements.devFeatures.textContent = analysis.features ? 
                Object.entries(analysis.features).map(([k, v]) => `${k}: ${v.toFixed(1)}`).join(', ') : 'Inactive';
            elements.devLexicon.textContent = analysis.evidence ? 
                `${analysis.evidence.length} signals detected` : 'Monitoring';
            elements.devOutlet.textContent = analysis.outletPrior ? 
                `${analysis.outletPrior > 0 ? '+' : ''}${analysis.outletPrior}` : 'Neutral';
            elements.devNorm.textContent = analysis.rawScore !== undefined ? 
                `Raw: ${analysis.rawScore.toFixed(1)} â†’ ${analysis.score}` : 'Standby';
            elements.devTiming.textContent = analysis.timing ? `${analysis.timing}ms` : 'Ready';
        }

        // Premium results display
        function displayResults(analysis) {
            currentAnalysis = analysis;
            
            // Update score with color coding
            elements.scoreNumber.textContent = analysis.score > 0 ? `+${analysis.score}` : analysis.score;
            const scoreColor = analysis.score > 0 ? 'var(--bias-right-primary)' : 
                              analysis.score < 0 ? 'var(--bias-left-primary)' : 'var(--text-secondary)';
            elements.scoreNumber.style.color = scoreColor;
            elements.scoreIndicatorRing.style.color = scoreColor;
            
            // Update bias scale marker with physics animation
            const markerPosition = ((analysis.score + 100) / 200) * 100;
            elements.scaleMarker.style.left = `${markerPosition}%`;
            
            // Update explanation
            elements.explanationText.textContent = analysis.explanation;
            
            // Update evidence chips
            if (analysis.evidence && analysis.evidence.length > 0) {
                elements.evidenceChips.innerHTML = analysis.evidence.map(item => {
                    const className = item.bias === 'left' ? 'negative' : 'positive';
                    const contextLabel = item.context === 'positive' ? '+' : item.context === 'negative' ? '-' : '';
                    return `<div class="evidence-chip ${className}">${item.term} ${contextLabel}</div>`;
                }).join('');
            } else {
                elements.evidenceChips.innerHTML = '<div class="evidence-chip">No significant patterns detected</div>';
            }
            
            // Update bias sentences
            if (analysis.biasSentences && analysis.biasSentences.length > 0) {
                elements.biasSentencesList.innerHTML = analysis.biasSentences.map(sentence => {
                    let labelText = '';
                    switch (sentence.bias) {
                        case 'left-positive': labelText = 'Pro-Liberal Sentiment'; break;
                        case 'left-negative': labelText = 'Anti-Liberal Sentiment'; break;
                        case 'right-positive': labelText = 'Pro-Conservative Sentiment'; break;
                        case 'right-negative': labelText = 'Anti-Conservative Sentiment'; break;
                        case 'left-framing': labelText = 'Liberal Framing Pattern'; break;
                        case 'right-framing': labelText = 'Conservative Framing Pattern'; break;
                        case 'emotional-language': labelText = 'Emotional Language Pattern'; break;
                        default: labelText = 'Bias Pattern Detected';
                    }
                    
                    return `
                        <div class="bias-sentence ${sentence.bias}">
                            <div class="sentence-label ${sentence.bias}">${labelText}</div>
                            <div class="sentence-text">"${sentence.text}"</div>
                        </div>
                    `;
                }).join('');
            } else {
                elements.biasSentencesList.innerHTML = '<div style="color: var(--text-muted); font-style: italic; text-align: center; padding: var(--space-xl);">Neural analysis detected no significant bias patterns in sentence structure</div>';
            }
            
            // Show results with premium animation
            elements.resultsSection.style.display = 'block';
            setTimeout(() => {
                elements.resultsSection.classList.add('visible');
            }, 100);
            
            // Save to enterprise storage
            saveToStorage(analysis);
        }

        // Main analysis functions
        async function analyzeUrl() {
            const url = sanitizeUrl(elements.urlInput.value);
            if (!url) {
                showError('Please enter a valid URL for neural processing');
                return;
            }

            setLoading(true);
            
            try {
                const html = await fetchWithProxies(url);
                const extracted = extractContent(html, url);
                
                if (!extracted.content || extracted.content.length < 100) {
                    throw new Error('Insufficient content extracted for neural analysis');
                }

                const analysis = analyzeBias(extracted.content, extracted.title, url);
                displayResults(analysis);
                
            } catch (error) {
                console.error('Neural analysis failed:', error);
                showError(`Neural gateway failed: ${error.message}. Try direct text input instead.`);
            } finally {
                setLoading(false);
            }
        }

        async function analyzeText() {
            const text = elements.articleText.value.trim();
            if (!text || text.length < 50) {
                showError('Please provide sufficient text content (minimum 50 characters)');
                return;
            }

            setLoading(true);
            
            try {
                const analysis = analyzeBias(text, '', 'Direct Input');
                displayResults(analysis);
            } catch (error) {
                console.error('Text analysis failed:', error);
                showError('Neural processing failed. Please verify input and try again.');
            } finally {
                setLoading(false);
            }
        }

        // Event listeners
        elements.analyzeBtn.addEventListener('click', analyzeUrl);
        elements.analyzeTextBtn.addEventListener('click', analyzeText);

        elements.urlInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                analyzeUrl();
            }
        });

        // Collapsible functionality
        document.querySelector('.collapsible-trigger').addEventListener('click', function() {
            const content = document.querySelector('.collapsible-content');
            const isOpen = content.classList.contains('open');
            
            content.classList.toggle('open');
            this.setAttribute('aria-expanded', !isOpen);
        });

        document.querySelector('.collapsible-trigger').addEventListener('keydown', function(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                this.click();
            }
        });

        // Dev panel toggle (enterprise diagnostics)
        elements.footerTitle.addEventListener('click', () => {
            devPanelTaps++;
            if (devPanelTaps >= 5) {
                devPanelVisible = !devPanelVisible;
                elements.devPanel.classList.toggle('visible', devPanelVisible);
                devPanelTaps = 0;
                
                if (devPanelVisible) {
                    showError('Enterprise diagnostics panel activated');
                }
            }
            
            setTimeout(() => {
                if (devPanelTaps < 5) devPanelTaps = 0;
            }, 2000);
        });

        // Advanced keyboard shortcuts
        document.addEventListener('keydown', (event) => {
            // Ctrl/Cmd + Enter for quick analysis
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                event.preventDefault();
                if (elements.urlInput.value.trim()) {
                    analyzeUrl();
                } else if (elements.articleText.value.trim()) {
                    analyzeText();
                }
            }
            
            // Escape to clear results
            if (event.key === 'Escape') {
                elements.resultsSection.classList.remove('visible');
                setTimeout(() => {
                    elements.resultsSection.style.display = 'none';
                }, 300);
            }
        });

        // Enterprise initialization
        function initializeEnterprise() {
            initNeuralParticles();
            renderHistory();
            
            // Hide results initially
            elements.resultsSection.style.display = 'none';
            elements.resultsSection.classList.remove('visible');
            
            // Initialize status indicators
            console.log('BiasLens Enterprise Neural Platform initialized');
            console.log('Neural engines: Active');
            console.log('Real-time analysis: Ready');
            console.log('Enterprise diagnostics: Standby');
        }

        // Advanced error handling
        window.addEventListener('error', (event) => {
            console.error('Enterprise system error:', event.error);
            showError('Neural system encountered an error. Please try again.');
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
            showError('Neural processing interrupted. Please retry your analysis.');
        });

        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', () => {
                const perfData = performance.getEntriesByType('navigation')[0];
                console.log(`Enterprise platform loaded in ${Math.round(perfData.loadEventEnd - perfData.fetchStart)}ms`);
            });
        }

        // Initialize the enterprise platform
        document.addEventListener('DOMContentLoaded', initializeEnterprise);
        
        // Fallback initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeEnterprise);
        } else {
            initializeEnterprise();
        }
    </script>
</body>
</html>
