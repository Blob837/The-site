<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover"/>
<title>UR NEWS - Terminal Intelligence</title>
<meta name="theme-color" content="#0a0a0a" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="Real-time intelligence terminal for breaking news and political analysis">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: #0a0a0a;
    --bg-secondary: #0f0f0f;
    --bg-tertiary: #151515;
    --line: #1a1a1a;
    --line-bright: #2a2a2a;
    --ink: #f0f0f0;
    --ink-secondary: #d0d0d0;
    --muted: #8a8a8a;
    --accent: #ff4444;
    --accent-hover: #ff6666;
    --accent-glow: #ff2222;
    --secondary: #666666;
    --warning: #ffaa44;
    --danger: #ff2244;
    --info: #44aaff;
    --success: #44ff88;
    --popular: #ff44ff;
    --border: #333333;
    --chip: #151515;
    --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.6);
    --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.4);
    --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }
  
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
  
  html {
    background-color: var(--bg);
    scroll-behavior: smooth;
  }
  
  body {
    background: var(--bg);
    color: var(--ink);
    font-family: 'JetBrains Mono', 'SF Mono', ui-monospace, Menlo, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
    font-weight: 400;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    overflow-x: hidden;
    position: relative;
  }
  
  /* Hypnotic gradient mesh background */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background: 
      radial-gradient(ellipse 1200px 800px at 10% 20%, rgba(255, 68, 68, 0.12) 0%, transparent 35%),
      radial-gradient(ellipse 1000px 600px at 90% 80%, rgba(68, 170, 255, 0.10) 0%, transparent 35%),
      radial-gradient(ellipse 800px 800px at 50% 60%, rgba(255, 68, 255, 0.08) 0%, transparent 40%),
      radial-gradient(circle 600px at 70% 40%, rgba(255, 170, 68, 0.06) 0%, transparent 35%),
      radial-gradient(circle 500px at 30% 70%, rgba(68, 255, 136, 0.05) 0%, transparent 35%);
    animation: meshFlow 25s ease-in-out infinite;
    filter: blur(1px);
  }

  @keyframes meshFlow {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg) scale(1);
      filter: blur(1px) saturate(100%);
    }
    20% {
      transform: translate(-20px, 10px) rotate(1deg) scale(1.02);
      filter: blur(2px) saturate(120%);
    }
    40% {
      transform: translate(10px, -20px) rotate(-1deg) scale(0.98);
      filter: blur(1px) saturate(110%);
    }
    60% {
      transform: translate(15px, 15px) rotate(0.5deg) scale(1.01);
      filter: blur(1.5px) saturate(130%);
    }
    80% {
      transform: translate(-10px, -10px) rotate(-0.5deg) scale(0.99);
      filter: blur(1px) saturate(105%);
    }
  }

  /* Scanlines overlay */
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    background: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.008) 2px,
        rgba(255, 255, 255, 0.008) 4px
      );
    animation: scanlines 8s linear infinite;
    mix-blend-mode: overlay;
  }

  @keyframes scanlines {
    0% { transform: translateY(0); }
    100% { transform: translateY(10px); }
  }

  @keyframes pulse {
    0%, 100% { 
      opacity: 1; 
      transform: scale(1);
    }
    50% { 
      opacity: 0.85; 
      transform: scale(0.98);
    }
  }

  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes neonGlow {
    0%, 100% {
      text-shadow: 
        0 0 10px var(--accent),
        0 0 20px var(--accent),
        0 0 30px var(--accent),
        0 0 40px var(--accent-glow);
    }
    50% {
      text-shadow: 
        0 0 15px var(--accent),
        0 0 30px var(--accent),
        0 0 45px var(--accent),
        0 0 60px var(--accent-glow);
    }
  }

  /* Header with liquid glass effect */
  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: 
      linear-gradient(180deg, 
        rgba(10, 10, 10, 0.97) 0%, 
        rgba(10, 10, 10, 0.94) 50%,
        rgba(10, 10, 10, 0.88) 100%);
    backdrop-filter: blur(24px) saturate(180%) brightness(90%);
    -webkit-backdrop-filter: blur(24px) saturate(180%) brightness(90%);
    border-bottom: 1px solid transparent;
    box-shadow: 
      0 0 50px rgba(255, 68, 68, 0.2),
      0 15px 35px rgba(0, 0, 0, 0.7),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
    position: relative;
    overflow: hidden;
  }

  header::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: -100%;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, 
      transparent, 
      var(--accent) 20%, 
      var(--info) 35%,
      var(--popular) 50%,
      var(--warning) 65%,
      var(--success) 80%,
      transparent);
    animation: slideStream 4s linear infinite;
  }

  @keyframes slideStream {
    0% { left: -100%; }
    100% { left: 100%; }
  }
  
  .bar {
    display: flex;
    gap: 1rem;
    align-items: center;
    padding: 1rem 1.2rem;
    position: relative;
  }
  
  .title {
    font-weight: 800;
    letter-spacing: 2.5px;
    font-size: 1.4rem;
    flex: 1;
    background: linear-gradient(135deg, 
      var(--accent) 0%, 
      var(--info) 25%, 
      var(--popular) 50%,
      var(--warning) 75%,
      var(--accent) 100%);
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    animation: shimmer 6s ease-in-out infinite, neonGlow 3s ease-in-out infinite;
    filter: drop-shadow(0 0 30px rgba(255, 68, 68, 0.6));
  }
  
  .title::after {
    content: 'â–®';
    color: var(--accent);
    animation: pulse 1s infinite;
    margin-left: 4px;
    font-size: 0.9em;
  }
  
  .blip {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, 
      rgba(255, 255, 255, 0.9), 
      var(--accent) 30%, 
      var(--accent-glow) 100%);
    margin-right: 0.8rem;
    box-shadow: 
      0 0 30px var(--accent),
      0 0 60px var(--accent),
      inset 0 0 15px rgba(255, 255, 255, 0.6);
    animation: heartbeat 1.5s infinite ease-in-out;
    position: relative;
    flex-shrink: 0;
  }

  @keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    10% { transform: scale(1.2); }
    20% { transform: scale(1); }
    30% { transform: scale(1.15); }
    40% { transform: scale(1); }
  }
  
  .meta {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    white-space: nowrap;
    color: var(--muted);
    opacity: 0.8;
  }
  
  /* Filter chips with liquid metal effect */
  .filters {
    display: flex;
    gap: 0.6rem;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0 1.2rem 1rem;
    scrollbar-width: none;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
    position: relative;
  }

  .filters::-webkit-scrollbar {
    display: none;
  }
  
  .chip {
    white-space: nowrap;
    padding: 0.5rem 1rem;
    border-radius: 24px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: 
      linear-gradient(135deg, 
        rgba(255, 255, 255, 0.03) 0%, 
        rgba(255, 255, 255, 0.01) 100%);
    color: var(--muted);
    font-size: 0.7rem;
    font-weight: 600;
    cursor: pointer;
    user-select: none;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
    backdrop-filter: blur(10px);
  }

  .chip::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, 
      rgba(255, 68, 68, 0.4), 
      transparent 70%);
    transform: translate(-50%, -50%);
    transition: all 0.5s ease;
  }

  .chip:hover::before {
    width: 150%;
    height: 150%;
  }
  
  .chip:hover {
    transform: translateY(-2px) scale(1.05);
    border-color: var(--accent);
    color: var(--ink);
    box-shadow: 
      0 5px 20px rgba(255, 68, 68, 0.3),
      0 0 30px rgba(255, 68, 68, 0.2),
      inset 0 0 20px rgba(255, 68, 68, 0.05);
  }
  
  .chip.active {
    background: linear-gradient(135deg, 
      var(--accent) 0%, 
      rgba(255, 68, 68, 0.7) 100%);
    color: var(--bg);
    border-color: var(--accent);
    box-shadow: 
      0 0 40px var(--accent),
      0 0 80px rgba(255, 68, 68, 0.4),
      inset 0 0 25px rgba(0, 0, 0, 0.4);
    font-weight: 700;
    transform: scale(1.05);
    animation: pulse 2s infinite;
  }

  .chip[data-view="popular"] {
    border-color: rgba(255, 68, 255, 0.3);
  }

  .chip[data-view="popular"]:hover::before {
    background: radial-gradient(circle, 
      rgba(255, 68, 255, 0.4), 
      transparent 70%);
  }

  .chip[data-view="popular"].active {
    background: linear-gradient(135deg, 
      var(--popular) 0%, 
      rgba(255, 68, 255, 0.7) 100%);
    box-shadow: 
      0 0 40px var(--popular),
      0 0 80px rgba(255, 68, 255, 0.4),
      inset 0 0 25px rgba(0, 0, 0, 0.4);
  }
  
  /* Main content */
  main {
    padding: 1rem 1.2rem;
    max-width: 1000px;
    margin: 0 auto;
    padding-bottom: 4rem;
    position: relative;
  }
  
  /* Enhanced cards with liquid crystal display */
  .card {
    background: 
      linear-gradient(135deg, 
        rgba(15, 15, 15, 0.9) 0%, 
        rgba(25, 25, 25, 0.9) 100%);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 
      0 10px 40px rgba(0, 0, 0, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    margin-bottom: 1.2rem;
    transform-origin: center;
    backdrop-filter: blur(10px);
  }

  .card::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, 
      transparent,
      var(--accent) 10%,
      var(--info) 30%,
      var(--popular) 50%,
      var(--warning) 70%,
      var(--success) 90%,
      transparent);
    transition: left 0.6s ease;
  }

  .card:hover::before {
    left: 100%;
  }

  .card:hover {
    transform: translateY(-6px) scale(1.02) rotateX(2deg);
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.7),
      0 0 60px rgba(255, 68, 68, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 68, 68, 0.2);
    background: 
      linear-gradient(135deg, 
        rgba(255, 68, 68, 0.05) 0%,
        rgba(25, 25, 25, 0.95) 100%);
  }

  .card.open {
    transform: translateY(-4px) scale(1.01);
    background: 
      linear-gradient(135deg,
        rgba(255, 68, 68, 0.1) 0%,
        rgba(68, 170, 255, 0.05) 50%,
        rgba(255, 170, 68, 0.1) 100%);
    box-shadow:
      0 25px 70px rgba(0, 0, 0, 0.8),
      0 0 80px rgba(255, 68, 68, 0.15),
      inset 0 0 40px rgba(255, 68, 68, 0.03);
    border-color: rgba(255, 68, 68, 0.4);
  }

  .card.popular {
    animation: popularPulse 4s ease-in-out infinite;
  }

  @keyframes popularPulse {
    0%, 100% {
      box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(255, 68, 255, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }
    50% {
      box-shadow:
        0 15px 50px rgba(0, 0, 0, 0.6),
        0 0 60px rgba(255, 68, 255, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }
  }

  .card-head {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 0.8rem;
    align-items: flex-start;
    padding: 1.2rem;
    cursor: pointer;
    position: relative;
    transition: background 0.3s ease;
  }
  
  .card-head:hover {
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0.02) 0%, 
      transparent 100%);
  }
  
  .favicon {
    width: 20px;
    height: 20px;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.05);
    display: inline-block;
    background-size: cover;
    background-position: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    flex-shrink: 0;
    margin-top: 2px;
    transition: all 0.3s ease;
  }

  .card:hover .favicon {
    transform: rotate(10deg) scale(1.1);
    box-shadow: 
      0 4px 16px rgba(255, 68, 68, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  
  .titleline {
    font-size: 1rem;
    font-weight: 700;
    line-height: 1.3;
    color: var(--ink);
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  .card:hover .titleline {
    color: var(--accent);
    text-shadow: 0 0 30px rgba(255, 68, 68, 0.4);
  }
  
  .tag {
    font-size: 0.7rem;
    color: var(--muted);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    flex-wrap: wrap;
    margin-top: 0.3rem;
  }
  
  .badge {
    font-size: 0.6rem;
    font-weight: 700;
    padding: 0.2rem 0.5rem;
    border: 1px solid var(--border);
    border-radius: 12px;
    color: var(--ink);
    background: rgba(255, 255, 255, 0.02);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
    flex-shrink: 0;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
  }
  
  .badge.trending {
    border-color: var(--popular);
    color: var(--popular);
    background: linear-gradient(135deg, 
      rgba(255, 68, 255, 0.1) 0%, 
      rgba(255, 68, 255, 0.05) 100%);
    box-shadow: 
      0 0 20px rgba(255, 68, 255, 0.3),
      inset 0 0 10px rgba(255, 68, 255, 0.1);
    animation: pulse 2s infinite;
  }

  .breaking-indicator {
    display: inline-block;
    background: linear-gradient(135deg, 
      var(--danger) 0%, 
      rgba(255, 34, 68, 0.7) 100%);
    color: white;
    font-size: 0.55rem;
    font-weight: 700;
    padding: 0.15rem 0.4rem;
    border-radius: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-left: 0.3rem;
    animation: pulse 1.5s infinite;
    box-shadow: 
      0 0 20px rgba(255, 34, 68, 0.5),
      inset 0 0 10px rgba(0, 0, 0, 0.3);
    flex-shrink: 0;
  }
  
  .time {
    font-size: 0.7rem;
    color: var(--muted);
    font-weight: 500;
    white-space: nowrap;
  }
  
  .expand-btn {
    color: var(--muted);
    font-size: 1.1rem;
    transition: all 0.3s ease;
    user-select: none;
    flex-shrink: 0;
  }

  .card:hover .expand-btn {
    color: var(--accent);
    transform: rotate(90deg);
  }

  .card.open .expand-btn {
    color: var(--accent);
    transform: rotate(180deg);
  }
  
  .card-body {
    padding: 1.2rem;
    font-size: 0.85rem;
    color: var(--ink-secondary);
    line-height: 1.6;
    display: none;
    background: linear-gradient(180deg, 
      rgba(0, 0, 0, 0.4) 0%, 
      rgba(0, 0, 0, 0.6) 100%);
    border-top: 1px solid rgba(255, 68, 68, 0.1);
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
  
  .card.open .card-body {
    display: block;
    animation: slideUp 0.3s ease-out;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .card-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
  }
  
  .article-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
    background: linear-gradient(135deg, 
      var(--accent) 0%, 
      rgba(255, 68, 68, 0.7) 100%);
    color: var(--bg) !important;
    padding: 0.7rem 1rem;
    border-radius: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-size: 0.75rem;
    transition: all 0.3s ease;
    box-shadow: 
      0 4px 20px rgba(255, 68, 68, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    text-decoration: none;
    flex: 1;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
  }

  .article-link::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, 
      rgba(255, 255, 255, 0.3), 
      transparent 70%);
    transform: translate(-50%, -50%);
    transition: all 0.4s ease;
  }

  .article-link:hover::before {
    width: 150%;
    height: 150%;
  }
  
  .article-link:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 
      0 6px 30px rgba(255, 68, 68, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .read-btn {
    background: linear-gradient(135deg, 
      var(--info) 0%, 
      rgba(68, 170, 255, 0.7) 100%);
  }

  .read-btn:hover {
    box-shadow: 
      0 6px 30px rgba(68, 170, 255, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  
  /* Article reader modal */
  .reader-modal {
    position: fixed;
    inset: 0;
    background: linear-gradient(135deg, 
      rgba(0, 0, 0, 0.98) 0%, 
      rgba(10, 10, 10, 0.98) 100%);
    backdrop-filter: blur(20px);
    z-index: 2000;
    display: none;
    animation: fadeIn 0.3s ease;
  }

  .reader-modal.active {
    display: flex;
    flex-direction: column;
  }

  @keyframes fadeIn {
    from { 
      opacity: 0;
      backdrop-filter: blur(0);
    }
    to { 
      opacity: 1;
      backdrop-filter: blur(20px);
    }
  }

  .reader-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    background: linear-gradient(180deg, 
      rgba(10, 10, 10, 0.95) 0%, 
      rgba(10, 10, 10, 0.9) 100%);
    border-bottom: 2px solid var(--accent);
    box-shadow: 0 0 40px rgba(255, 68, 68, 0.3);
  }

  .reader-title {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--accent);
    flex: 1;
    margin-right: 1rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .reader-close {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, 
      var(--accent) 0%, 
      rgba(255, 68, 68, 0.7) 100%);
    color: var(--bg);
    border: none;
    font-size: 1.5rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(255, 68, 68, 0.4);
  }

  .reader-close:hover {
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 0 40px rgba(255, 68, 68, 0.6);
  }

  .reader-body {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    max-width: 800px;
    margin: 0 auto;
    width: 100%;
  }

  .reader-content {
    color: var(--ink-secondary);
    font-size: 0.95rem;
    line-height: 1.8;
  }

  .reader-content p {
    margin-bottom: 1rem;
  }

  .reader-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 300px;
    color: var(--accent);
    font-size: 0.9rem;
    animation: pulse 1.5s infinite;
  }

  .reader-error {
    color: var(--danger);
    text-align: center;
    padding: 2rem;
  }

  /* Toast notifications */
  .toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, 
      rgba(15, 15, 15, 0.95) 0%, 
      rgba(25, 25, 25, 0.95) 100%);
    color: var(--ink);
    padding: 0.8rem 1.2rem;
    border-radius: 12px;
    z-index: 3000;
    font-weight: 600;
    box-shadow: 
      0 10px 40px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: slideUp 0.3s ease-out;
    max-width: 85%;
    text-align: center;
    font-size: 0.8rem;
    backdrop-filter: blur(10px);
  }
  
  .toast.success {
    border-color: var(--success);
    box-shadow: 
      0 0 40px rgba(68, 255, 136, 0.3),
      0 10px 40px rgba(0, 0, 0, 0.6);
  }
  
  .toast.error {
    border-color: var(--danger);
    box-shadow: 
      0 0 40px rgba(255, 34, 68, 0.3),
      0 10px 40px rgba(0, 0, 0, 0.6);
  }

  /* Reset button */
  .btn.reset {
    border: 2px solid var(--warning);
    background: linear-gradient(135deg, 
      rgba(15, 15, 15, 0.9) 0%, 
      rgba(25, 25, 25, 0.9) 100%);
    color: var(--ink);
    padding: 0.6rem 0.9rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    z-index: 100;
    box-shadow: 
      0 0 30px rgba(255, 170, 68, 0.2),
      0 10px 30px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
  }
  
  .btn.reset:hover {
    background: linear-gradient(135deg, 
      var(--warning) 0%, 
      rgba(255, 170, 68, 0.8) 100%);
    color: var(--bg);
    box-shadow: 
      0 0 50px rgba(255, 170, 68, 0.4),
      0 15px 40px rgba(0, 0, 0, 0.6);
    transform: translateY(-3px) scale(1.05);
  }

  /* Source toggles */
  .src-grid {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding: 1rem 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .src-grid::-webkit-scrollbar {
    display: none;
  }

  .src {
    padding: 0.5rem 0.8rem;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.05);
    font-size: 0.65rem;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    white-space: nowrap;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex-shrink: 0;
    backdrop-filter: blur(5px);
  }

  .src:hover {
    transform: translateY(-2px);
    border-color: var(--secondary);
    color: var(--ink);
    box-shadow: 0 5px 20px rgba(136, 136, 136, 0.3);
  }

  .src.on {
    background: linear-gradient(135deg, 
      var(--secondary) 0%, 
      rgba(136, 136, 136, 0.7) 100%);
    color: var(--bg);
    border-color: var(--secondary);
    box-shadow: 
      0 0 30px rgba(136, 136, 136, 0.3),
      inset 0 0 15px rgba(0, 0, 0, 0.3);
  }

  /* Empty state */
  .empty {
    color: var(--muted);
    text-align: center;
    padding: 3rem 1.5rem;
    background: linear-gradient(135deg, 
      rgba(15, 15, 15, 0.9) 0%, 
      rgba(25, 25, 25, 0.9) 100%);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 
      0 10px 40px rgba(0, 0, 0, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
  }
  
  .empty h3 {
    background: linear-gradient(135deg, var(--accent), var(--info));
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 1.5px;
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    .card-actions {
      flex-direction: column;
    }
    
    .article-link {
      width: 100%;
    }
  }

  @media (max-width: 480px) {
    .bar {
      padding: 0.7rem 0.8rem;
    }
    
    .title {
      font-size: 1.1rem;
      letter-spacing: 1px;
    }
    
    .filters {
      padding: 0 0.8rem 0.8rem;
      gap: 0.4rem;
    }
    
    .chip {
      padding: 0.35rem 0.7rem;
      font-size: 0.6rem;
    }
    
    main {
      padding: 0.8rem;
    }
    
    .reader-body {
      padding: 1rem;
    }
  }
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="title">
      <span class="blip"></span>UR NEWS
      <span class="meta" id="lastUpdated">â€¢ INITIALIZING</span>
    </div>
  </div>
  <div class="filters" id="filters">
    <div class="chip active" data-view="all">ALL</div>
    <div class="chip" data-view="popular">ðŸ”¥ TRENDING</div>
    <div class="chip" data-view="by-source">BY SOURCE</div>
    <div class="chip" data-view="conservative">CONSERVATIVE</div>
    <div class="chip" data-view="populist">POPULIST</div>
    <div class="chip" data-view="breaking">BREAKING</div>
  </div>
</header>

<main>
  <div class="src-grid" id="sourceToggles"></div>
  <div class="list" id="feedList"></div>
  <div class="empty" id="emptyMsg" style="display:none;">
    <h3>NO ACTIVE FEEDS</h3>
    <p>Enable sources above or wait for refresh</p>
  </div>
</main>

<div class="reader-modal" id="readerModal">
  <div class="reader-header">
    <div class="reader-title" id="readerTitle"></div>
    <button class="reader-close" id="readerClose">Ã—</button>
  </div>
  <div class="reader-body">
    <div id="readerContent"></div>
  </div>
</div>

<button class="btn reset" id="resetBtn" title="Reset">RESET</button>

<script>
/* ================= FERRARI EDITION ================= */

const SOURCES = [
  { id:'breitbart', name:'Breitbart', url:'https://www.breitbart.com/feed/', lane:'populist' },
  { id:'federalist', name:'The Federalist', url:'https://thefederalist.com/feed/', lane:'conservative' },
  { id:'dailywire', name:'Daily Wire', url:'https://www.dailywire.com/feeds/rss.xml', lane:'conservative' },
  { id:'gateway', name:'Gateway Pundit', url:'https://www.thegatewaypundit.com/feed/', lane:'populist' },
  { id:'infowars', name:'InfoWars', url:'https://www.infowars.com/rss.xml', lane:'populist' },
  { id:'revolver', name:'Revolver News', url:'https://www.revolver.news/feed/', lane:'populist' },
  { id:'natfile', name:'National File', url:'https://nationalfile.com/feed/', lane:'populist' },
  { id:'tplvoice', name:"People's Voice", url:'https://thepeoplesvoice.tv/feed/', lane:'populist' },
  { id:'libertydaily', name:'Liberty Daily', url:'https://thelibertydaily.com/rss.xml', lane:'populist' },
  { id:'naturalnews', name:'Natural News', url:'https://www.naturalnews.com/rss.xml', lane:'populist' },
  { id:'dailycaller', name:'Daily Caller', url:'https://dailycaller.com/feed/', lane:'conservative' },
  { id:'redstate', name:'RedState', url:'https://redstate.com/feed/', lane:'conservative' },
  { id:'amgreat', name:'AmGreatness', url:'https://amgreatness.com/feed/', lane:'conservative' },
  { id:'pjm', name:'PJ Media', url:'https://pjmedia.com/feeds/latest', lane:'conservative' },
  { id:'nypost', name:'NY Post', url:'https://nypost.com/feed/', lane:'populist' },
  { id:'townhall', name:'Townhall', url:'https://townhall.com/rss', lane:'conservative' },
  { id:'foxnews', name:'Fox News', url:'https://feeds.foxnews.com/foxnews/latest', lane:'conservative' },
  { id:'washexam', name:'Washington Examiner', url:'https://www.washingtonexaminer.com/feed', lane:'conservative' },
  { id:'theblaze', name:'The Blaze', url:'https://www.theblaze.com/feeds/latest.rss', lane:'conservative' }
];

const STATE = {
  enabled: new Set(loadEnabled() || SOURCES.map(s=>s.id)),
  items: [],
  view: 'all',
  loading: false,
  lastFetch: 0,
  cache: new Map(),
  expandedCards: new Set(),
  trendingKeywords: new Map()
};

// Memory cache only for speed
const CACHE_TTL = 120000;

function getCached(url) {
  const cached = STATE.cache.get(url);
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }
  return null;
}

function setCached(url, data) {
  STATE.cache.set(url, { data, timestamp: Date.now() });
}

// Ultra-fast parallel fetch
async function fetchFast(url) {
  const cached = getCached(url);
  if (cached) return Promise.resolve(cached);

  const controller = new AbortController();
  const timeout = setTimeout(() => controller.abort(), 4000);

  try {
    // Fire all proxies simultaneously
    const response = await Promise.race([
      fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent(url), {
        signal: controller.signal
      }),
      fetch('https://corsproxy.io/?' + encodeURIComponent(url), {
        signal: controller.signal
      })
    ]);

    clearTimeout(timeout);
    if (!response.ok) throw new Error('Failed');
    
    const text = await response.text();
    if (text && text.length > 100) {
      setCached(url, text);
      return text;
    }
    throw new Error('Empty');
  } catch(e) {
    clearTimeout(timeout);
    throw e;
  }
}

// Calculate trending based on keyword frequency
function calculateTrending(items) {
  const keywords = new Map();
  const now = Date.now();
  
  items.forEach(item => {
    const age = (now - new Date(item.pubDate)) / (1000 * 60 * 60); // hours
    if (age > 24) return; // Only last 24 hours
    
    const text = (item.title + ' ' + item.desc).toLowerCase();
    const words = text.match(/\b[a-z]{4,}\b/g) || [];
    
    words.forEach(word => {
      if (!/^(with|that|this|from|have|were|been|their|about|would|could|should)$/.test(word)) {
        const current = keywords.get(word) || 0;
        keywords.set(word, current + (1 / Math.max(1, age / 6))); // Weight by recency
      }
    });
  });
  
  STATE.trendingKeywords = keywords;
  
  // Score items based on trending keywords
  items.forEach(item => {
    const text = (item.title + ' ' + item.desc).toLowerCase();
    let score = 0;
    
    keywords.forEach((weight, word) => {
      if (text.includes(word)) {
        score += weight;
      }
    });
    
    item.trendingScore = score;
  });
}

function parseRSS(xmlString, source) {
  const doc = new DOMParser().parseFromString(xmlString, 'text/xml');
  if (doc.getElementsByTagName('parsererror')[0]) return [];

  return Array.from(doc.querySelectorAll('item, entry'))
    .slice(0, 15) // Less items per source for speed
    .map(item => {
      const title = (item.querySelector('title')?.textContent || '').trim();
      const link = (item.querySelector('link')?.getAttribute('href') || 
                   item.querySelector('link')?.textContent || '').trim();
      const pubDate = (item.querySelector('pubDate, updated, published')?.textContent || '').trim();
      const desc = (item.querySelector('description, summary')?.textContent || '').trim();
      
      return {
        title,
        link,
        pubDate: pubDate || new Date().toISOString(),
        source: source.name,
        lane: source.lane,
        id: source.id,
        desc: stripHTML(desc).slice(0, 250),
        isBreaking: /breaking|urgent|just in|developing|exclusive/i.test(title),
        trendingScore: 0
      };
    })
    .filter(x => x.title && x.link && x.title.length > 15);
}

function stripHTML(html) {
  const temp = document.createElement('div');
  temp.innerHTML = html;
  return temp.textContent.replace(/\s+/g, ' ').trim();
}

function saveEnabled() {
  localStorage.setItem('urnews.enabled', JSON.stringify([...STATE.enabled]));
  localStorage.setItem('urnews.expanded', JSON.stringify([...STATE.expandedCards]));
}

function loadEnabled() {
  try { 
    const expanded = JSON.parse(localStorage.getItem('urnews.expanded'));
    if (expanded) STATE.expandedCards = new Set(expanded);
    return JSON.parse(localStorage.getItem('urnews.enabled'));
  } catch(e) { 
    return null;
  }
}

// Blazing fast parallel loader
async function loadFeeds() {
  if (STATE.loading) return;
  STATE.loading = true;
  STATE.lastFetch = Date.now();
  
  try {
    const enabledSources = SOURCES.filter(s => STATE.enabled.has(s.id));
    
    // Fire ALL requests at once
    const promises = enabledSources.map(source => 
      fetchFast(source.url)
        .then(text => parseRSS(text, source))
        .catch(() => [])
    );
    
    const results = await Promise.allSettled(promises);
    const allItems = results
      .filter(r => r.status === 'fulfilled')
      .flatMap(r => r.value)
      .sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
    
    STATE.items = allItems.slice(0, 100);
    
    // Calculate trending
    calculateTrending(STATE.items);
    
    render();
    
    document.getElementById('lastUpdated').textContent = 
      `â€¢ ${new Date().toLocaleTimeString()}`;
    
    toast(`${STATE.items.length} articles loaded`, 'success');
    
  } catch (error) {
    console.error('Failed:', error);
    toast('Loading failed', 'error');
  } finally {
    STATE.loading = false;
  }
}

// Fixed article reader
async function openReader(item) {
  const modal = document.getElementById('readerModal');
  const title = document.getElementById('readerTitle');
  const content = document.getElementById('readerContent');
  
  modal.classList.add('active');
  title.textContent = item.title;
  content.innerHTML = '<div class="reader-loading">LOADING ARTICLE...</div>';
  
  // Block NY Post and other problematic sources
  const blockedDomains = ['nypost.com', 'wsj.com', 'ft.com'];
  const domain = new URL(item.link).hostname;
  
  if (blockedDomains.some(blocked => domain.includes(blocked))) {
    content.innerHTML = `
      <div class="reader-error">
        This source blocks external readers. 
        Please visit the article directly.
      </div>
    `;
    return;
  }
  
  try {
    // Use 12ft.io for paywall bypass
    const proxyUrl = 'https://12ft.io/' + item.link;
    const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent(proxyUrl));
    const html = await response.text();
    
    // Extract article content
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    
    // Remove scripts and styles
    doc.querySelectorAll('script, style, nav, header, footer, aside').forEach(el => el.remove());
    
    // Find main content
    const article = doc.querySelector('article, main, [role="main"], .content, .article-body') || doc.body;
    
    // Extract paragraphs
    const paragraphs = Array.from(article.querySelectorAll('p'))
      .map(p => p.textContent.trim())
      .filter(text => text.length > 50)
      .slice(0, 30)
      .map(text => `<p>${text}</p>`)
      .join('');
    
    content.innerHTML = `<div class="reader-content">${paragraphs || 'Unable to extract article content.'}</div>`;
    
  } catch (e) {
    // Fallback to showing description
    content.innerHTML = `
      <div class="reader-content">
        <p><strong>Summary:</strong></p>
        <p>${item.desc || 'No summary available.'}</p>
        <p style="margin-top: 2rem;">
          <a href="${item.link}" target="_blank" style="color: var(--accent);">
            Click here to read the full article â†’
          </a>
        </p>
      </div>
    `;
  }
}

function createCard(item) {
  const cardId = btoa(item.link).slice(0, 16);
  const isExpanded = STATE.expandedCards.has(cardId);
  const isTrending = item.trendingScore > 5;
  
  const article = document.createElement('article');
  article.className = `card ${isExpanded ? 'open' : ''} ${isTrending ? 'popular' : ''}`;
  article.dataset.cardId = cardId;
  
  const hostname = new URL(item.link).hostname;
  const timeString = fmtTime(item.pubDate);
  
  article.innerHTML = `
    <div class="card-head">
      <span class="favicon" style="background-image:url('https://www.google.com/s2/favicons?domain=${hostname}&sz=64');"></span>
      <div>
        <div class="titleline">
          ${escapeHTML(item.title)}
          ${item.isBreaking ? '<span class="breaking-indicator">BREAKING</span>' : ''}
        </div>
        <div class="tag">
          ${escapeHTML(item.source)} â€¢ <span class="time">${timeString}</span>
          ${isTrending ? '<span class="badge trending">TRENDING</span>' : ''}
        </div>
      </div>
      <div class="expand-btn">â–¶</div>
    </div>
    <div class="card-body">
      <div>${escapeHTML(item.desc || 'No summary available.')}</div>
      <div class="card-actions">
        <a href="${escapeHTML(item.link)}" target="_blank" class="article-link">
          OPEN SOURCE
        </a>
        <button class="article-link read-btn">
          READ HERE
        </button>
      </div>
    </div>
  `;
  
  const header = article.querySelector('.card-head');
  const expandBtn = article.querySelector('.expand-btn');
  const readBtn = article.querySelector('.read-btn');
  
  const toggleCard = () => {
    const isOpen = article.classList.toggle('open');
    expandBtn.textContent = isOpen ? 'â–¼' : 'â–¶';
    
    if (isOpen) {
      STATE.expandedCards.add(cardId);
      // Close others
      document.querySelectorAll('.card.open').forEach(card => {
        if (card !== article) {
          card.classList.remove('open');
          card.querySelector('.expand-btn').textContent = 'â–¶';
          STATE.expandedCards.delete(card.dataset.cardId);
        }
      });
    } else {
      STATE.expandedCards.delete(cardId);
    }
    saveEnabled();
  };

  header.addEventListener('click', toggleCard);
  readBtn.addEventListener('click', (e) => {
    e.preventDefault();
    openReader(item);
  });
  
  return article;
}

function render() {
  const feedList = document.getElementById('feedList');
  const emptyMsg = document.getElementById('emptyMsg');
  
  feedList.innerHTML = '';
  
  let filtered = STATE.items.filter(item => STATE.enabled.has(item.id));
  
  switch (STATE.view) {
    case 'popular':
      filtered = filtered
        .sort((a, b) => b.trendingScore - a.trendingScore)
        .slice(0, 30);
      break;
    case 'conservative':
      filtered = filtered.filter(item => item.lane === 'conservative');
      break;
    case 'populist':
      filtered = filtered.filter(item => item.lane === 'populist');
      break;
    case 'breaking':
      filtered = filtered.filter(item => item.isBreaking);
      break;
    case 'by-source':
      const grouped = {};
      filtered.forEach(item => {
        if (!grouped[item.source]) grouped[item.source] = [];
        grouped[item.source].push(item);
      });
      
      Object.keys(grouped).sort().forEach(sourceName => {
        const header = document.createElement('div');
        header.style.cssText = `
          margin: 2rem 0 1rem;
          font-size: 1rem;
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 1.5px;
          color: var(--accent);
          padding-bottom: 0.5rem;
          border-bottom: 1px solid var(--line);
        `;
        header.textContent = `${sourceName} (${grouped[sourceName].length})`;
        feedList.appendChild(header);
        
        grouped[sourceName].slice(0, 10).forEach(item => {
          feedList.appendChild(createCard(item));
        });
      });
      return;
  }
  
  if (!filtered.length) {
    emptyMsg.style.display = 'block';
  } else {
    emptyMsg.style.display = 'none';
    filtered.slice(0, 50).forEach(item => {
      feedList.appendChild(createCard(item));
    });
  }
}

function buildSourceToggles() {
  const container = document.getElementById('sourceToggles');
  container.innerHTML = '';
  
  SOURCES.forEach(source => {
    const button = document.createElement('button');
    button.className = 'src' + (STATE.enabled.has(source.id) ? ' on' : '');
    button.textContent = source.name;
    button.dataset.id = source.id;

    button.addEventListener('click', () => {
      if (STATE.enabled.has(source.id)) {
        STATE.enabled.delete(source.id);
      } else {
        STATE.enabled.add(source.id);
      }
      
      if (STATE.enabled.size === 0) {
        STATE.enabled = new Set([source.id]);
      }
      
      button.classList.toggle('on');
      render();
      saveEnabled();
    });

    container.appendChild(button);
  });
}

function fmtTime(ts) {
  const d = new Date(ts);
  const diff = (Date.now() - d) / 1000;
  if (diff < 60) return 'NOW';
  if (diff < 3600) return Math.floor(diff / 60) + 'm';
  if (diff < 86400) return Math.floor(diff / 3600) + 'h';
  return Math.floor(diff / 86400) + 'd';
}

function toast(msg, type = 'info') {
  const el = document.createElement('div');
  el.className = `toast ${type}`;
  el.textContent = msg;
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 2500);
  return el;
}

function escapeHTML(str = '') {
  const map = {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};
  return str.replace(/[&<>"']/g, c => map[c]);
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  buildSourceToggles();
  
  document.getElementById('filters').addEventListener('click', (e) => {
    const chip = e.target.closest('.chip');
    if (!chip) return;
    document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
    chip.classList.add('active');
    STATE.view = chip.dataset.view;
    render();
  });
  
  document.getElementById('readerClose').addEventListener('click', () => {
    document.getElementById('readerModal').classList.remove('active');
  });
  
  document.getElementById('resetBtn').addEventListener('click', () => {
    if(confirm('Reset?')) {
      localStorage.clear();
      location.reload();
    }
  });
  
  // Auto-refresh
  setInterval(() => {
    if (!STATE.loading) loadFeeds();
  }, 120000);
  
  // Initial load
  loadFeeds();
});
</script>
</body>
</html>
